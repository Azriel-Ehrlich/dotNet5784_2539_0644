<Window x:Class="PL.Task.TaskDataInputWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:PL.Task"
        mc:Ignorable="d" ResizeMode="NoResize"
        Title="EngineerWindow" MinHeight="650" Width="640" Background="LightBlue"
        SizeToContent="Height"
        DataContext="{Binding CurrentTask, RelativeSource={RelativeSource Self}, Mode=TwoWay}">
    <Window.Resources>
        <Style x:Key="stTextBlock-Title" TargetType="TextBlock">
            <Setter Property="Width" Value="300"/>
            <Setter Property="Height" Value="30"/>
            <Setter Property="FontSize" Value="20"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Margin" Value="20,0,0,0"/>
            <Setter Property="TextAlignment" Value="Center" />
        </Style>
        <Style x:Key="stTextBlock" TargetType="TextBlock">
            <Setter Property="Width" Value="200"/>
            <Setter Property="Height" Value="30"/>
            <Setter Property="FontSize" Value="20"/>
            <Setter Property="Margin" Value="20,0,0,0"/>
        </Style>
        <Style x:Key="stTextBox" TargetType="TextBox">
            <Setter Property="Width" Value="340"/>
            <Setter Property="Height" Value="30"/>
            <Setter Property="FontSize" Value="20"/>
        </Style>
        <Style x:Key="stDatePicker" TargetType="DatePicker">
            <Setter Property="Width" Value="340"/>
            <Setter Property="Height" Value="30"/>
            <Setter Property="FontSize" Value="20"/>
        </Style>
        <Style x:Key="stDateBlock" TargetType="TextBlock">
            <Setter Property="Width" Value="340"/>
            <Setter Property="Height" Value="30"/>
            <Setter Property="FontSize" Value="20"/>
        </Style>
        <Style x:Key="stButton" TargetType="Button">
            <Setter Property="Width" Value="240"/>
            <Setter Property="Height" Value="30"/>
            <Setter Property="FontSize" Value="20"/>
        </Style>
        <!--
        When create new task we can't add new dependencies 
        TODO: handle this issue in code behind
        -->
        <Style x:Key="stDepsButton" TargetType="Button">
            <Setter Property="Width" Value="240"/>
            <Setter Property="Height" Value="30"/>
            <Setter Property="FontSize" Value="20"/>
            <Setter Property="Margin" Value="20,0,0,0"/>
            <Style.Triggers>
                <DataTrigger Binding="{Binding isNewTask}" Value="True">
                    <Setter Property="Visibility" Value="Hidden"/>
                </DataTrigger>
                <DataTrigger Binding="{Binding isNewTask}" Value="False">
                    <Setter Property="Visibility" Value="Visible"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <StackPanel>
        <WrapPanel>
            <!-- [not] amazing title -->
            <TextBlock Style="{StaticResource stTextBlock-Title}" Text="Task Data" />
        </WrapPanel>
        <Separator Opacity="0" />

        <WrapPanel>
            <!-- TODO: when add new task we should not set id. it automaticly in DAL -->
            <TextBlock Style="{StaticResource stTextBlock}" Text="Id" />
            <TextBox Style="{StaticResource stTextBox}"
                 Text="{Binding Path=Task.Id, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true}"
                 IsEnabled="False"/>
        </WrapPanel>
        <Separator Opacity="0" />

        <WrapPanel>
            <TextBlock Style="{StaticResource stTextBlock}" Text="Alias" />
            <TextBox Style="{StaticResource stTextBox}"
                 Text="{Binding Path=Task.Alias, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true}"/>
        </WrapPanel>
        <Separator Opacity="0" />

        <WrapPanel>
            <TextBlock Style="{StaticResource stTextBlock}" Text="Description" />
            <TextBox Style="{StaticResource stTextBox}"
                 Text="{Binding Path=Task.Description, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true}" />
        </WrapPanel>
        <Separator Opacity="0" />

        <WrapPanel>
            <TextBlock Style="{StaticResource stTextBlock}" Text="Remarks" />
            <TextBox Style="{StaticResource stTextBox}"
                 Text="{Binding Path=Task.Remarks, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true}" />
        </WrapPanel>
        <Separator Opacity="0" />

        <WrapPanel>
            <TextBlock Style="{StaticResource stTextBlock}" Text="Engineer ID" />
            <TextBox Style="{StaticResource stTextBox}"
                 Text="{Binding Path=Task.Engineer.Id, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true}" />
        </WrapPanel>
        <Separator Opacity="0" />

        <WrapPanel>
            <TextBlock Style="{StaticResource stTextBlock}" Text="Complexity" />
            <ComboBox Width="340" Height="30" FontSize="20"
                  ItemsSource="{Binding Source={StaticResource EngineerExpirieneWithoutAllCollectionKey}}"
                  SelectedValue="{Binding Path=Task.Complexity, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true}"/>
        </WrapPanel>
        <Separator Opacity="0" />

        <!-- display dates -->
        <WrapPanel>
            <TextBlock Style="{StaticResource stTextBlock}" Text="Start Date" />
            <DatePicker Style="{StaticResource stDatePicker}"
                        Text="{Binding Path=Task.StartDate, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true}" />
        </WrapPanel>
        <Separator Opacity="0" />

        <WrapPanel>
            <TextBlock Style="{StaticResource stTextBlock}" Text="Required Effort Time" />
            <TextBox Style="{StaticResource stTextBox}"
                     Text="{Binding Path=Task.RequiredEffortTime, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true}" />
        </WrapPanel>
        <Separator Opacity="0" />

        <WrapPanel>
            <TextBlock Style="{StaticResource stTextBlock}" Text="Scheduled Date" />
            <TextBox Style="{StaticResource stTextBox}" Text="{Binding Path=Task.ScheduledDate, Mode=OneWay}"
                     IsEnabled="False"/>
        </WrapPanel>
        <Separator Opacity="0" />
        <WrapPanel>
            <TextBlock Style="{StaticResource stTextBlock}" Text="Complete Date" />
            <TextBox Style="{StaticResource stTextBox}" Text="{Binding Path=Task.CompleteDate, Mode=TwoWay}" />
        </WrapPanel>
        <Separator Opacity="0" />
        <WrapPanel>
            <TextBlock Style="{StaticResource stTextBlock}" Text="Forecast Date" />
            <TextBox Style="{StaticResource stTextBox}" Text="{Binding Path=Task.ForecastDate, Mode=OneWay}"
                     IsEnabled="False"/>
        </WrapPanel>
        <Separator Opacity="0" />

        <WrapPanel>
            <Button Content="Add Dependencies" Click="AddDependencies" Style="{StaticResource stDepsButton}"/>
        </WrapPanel>
        <Separator Opacity="0" Height="30" />
        <WrapPanel>

            <TextBlock Style="{StaticResource stTextBlock-Title}" Text="Dependencies" />
        </WrapPanel>
        <Separator Opacity="0" />
        <!--dataGrid of dependencies-->
        <DataGrid ItemsSource="{Binding Path=Task.Dependencies, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true}"
          AutoGenerateColumns="False" CanUserAddRows="False" CanUserDeleteRows="False" >
            <DataGrid.Columns>
                <!-- Define a template column with a checkbox -->
                <DataGridTemplateColumn Header="Select">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <CheckBox IsChecked="{Binding IsSelected}" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTextColumn Header="Id" Binding="{Binding Id}" Width="100" IsReadOnly="True"/>
                <DataGridTextColumn Header="Alias" Binding="{Binding Alias}" Width="200" IsReadOnly="True"/>
                <DataGridTextColumn Header="Description" Binding="{Binding Description}" Width="300" IsReadOnly="True"/>
            </DataGrid.Columns>
        </DataGrid>

        <Separator Opacity="0" Height="30" />

        <Separator Opacity="0" />

        <Button Style="{StaticResource stButton}" Click="btnAddUpdate_Click"
            Content="{Binding Path=Task.Id, Mode=OneTime, Converter={StaticResource ConverIdToContentKey}}"/>

    </StackPanel>
</Window>
